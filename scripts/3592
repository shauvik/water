{"coscript-json-url":"coscript:http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/api\/script\/3592","koalescence-lite-url":"http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/lite\/script\/3592","coscripter-save-url":"http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/api\/script\/3592","coscript-run-url":"coscriptrun:http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/lite\/script\/3592","modified-at":"2007-10-03T06:25:49Z","creator":{"shortname":"Jevimental","name":"Jevimental","email":"Jevimental"},"coscript-run-json-url":"coscriptrun:http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/api\/script\/3592","body":"\/\/ ==UserScript==\n\/\/ @name           Ogame menu flota para la Version 0.77\n\/\/ @author         sylkat - Modificado por MxBajista\n\/\/ @date           2007-09-05\n\/\/ @version        0.11\n\/\/ @namespace     \n\/\/ @description    Script original modificado para la compatibilizar  con la version 0.77 de Ogame.\n\/\/ @include        http:\/\/uni39.ogame.com.es\/game\/index.php?page=flotten1&* \n\/\/ ==\/UserScript==\n\n(function()\n{\n\tvar inputs = document.evaluate(\"\/\/input[@type='text' or not(@type)]\", document, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\n\t\tfor (var i=0; i<inputs.snapshotLength; i++) {\n\t\t\tvar a = document.createElement(\"a\");\n\t\t\ta.setAttribute(\"href\", \"javascript:var texto=document.getElementsByName('\"+inputs.snapshotItem(i).name+\"')[0];texto.value=999999;texto.onchange();\");\n\t\t\ta.innerHTML = \"&infin;\";\n\t\t\tinputs.snapshotItem(i).parentNode.appendChild(a);\n\n\t\t\tvar a = document.createElement(\"a\");\n\t\t\ta.setAttribute(\"href\", \"javascript:var texto=document.getElementsByName('\"+inputs.snapshotItem(i).name+\"')[0];texto.value++;texto.onchange();\");\n\t\t\ta.innerHTML='+';\n\t\t\tinputs.snapshotItem(i).parentNode.appendChild(a);\n\n\t\t\tvar a = document.createElement(\"a\");\n\t\t\ta.setAttribute(\"href\", \"javascript:var texto=document.getElementsByName('\"+inputs.snapshotItem(i).name+\"')[0];if (texto.value>0){ texto.value--;texto.onchange();}\");\n\t\t\ta.innerHTML = \"&minus;\";\n\t\t\tinputs.snapshotItem(i).parentNode.appendChild(a);\n\n\t\t\tvar a = document.createElement(\"a\");\n\t\t\ta.setAttribute(\"href\", \"javascript:var texto=document.getElementsByName('\"+inputs.snapshotItem(i).name+\"')[0];texto.value=0;texto.onchange();\");\n\t\t\ta.innerHTML = \"&bull;\";\n\t\t\tinputs.snapshotItem(i).parentNode.appendChild(a);\n\t\t}\n\t\n\tvar element = document.evaluate('\/html\/body\/div\/center\/table\/tbody\/tr\/td[2]\/table\/tbody\/tr[3]', document, null, \tXPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.getElementsByTagName('td');\n\tvar metal = parseInt(element[0].innerHTML.replace(\/.*>(.*)<.*\/g,'$1').replace(\/\\.\/g, ''));\n\tvar cristal = parseInt(element[1].innerHTML.replace(\/.*>(.*)<.*\/g,'$1').replace(\/\\.\/g, ''));\n\tvar deuterio = parseInt(element[2].innerHTML.replace(\/.*>(.*)<.*\/g,'$1').replace(\/\\.\/g, ''));\n\tvar recursos = metal + cristal + deuterio;\n\tunsafeWindow.calculate = calculate;\n\tvar infoRow = document.getElementsByTagName('tr');\n\tvar as = infoRow[infoRow.length-3].getElementsByTagName('a');\n\tfor (var i=0; i<as.length; i++)\n\t\tas[i].setAttribute('onclick', 'setTimeout(calculate, 20)');\n\tinfoRow = infoRow[infoRow.length-1].firstChild;\n\tcalculate();\n\tfor(i=202; i<215; i++){  \/\/ quiza se podria reducir los bucles de busqueda cogiendo directamente esa columna\n\t\tx=document.getElementsByName(\"ship\"+i);\n\t\tif(x.length){\n\t\t\tx[0].addEventListener('keyup',calculate,true);\n\t\t\tx[0].parentNode.previousSibling.previousSibling.firstChild.setAttribute('onclick', 'setTimeout(calculate, 20)');\n\t\t\tx[0].setAttribute('onchange', \"this.value=parseInt(Math.min(parseInt('0'+this.value, 10), parseInt(getElementsByName('max'+this.name)[0].value, 10)),10);setTimeout(calculate, 10)\");\n\t}\n}\t\n\n\nfunction puntuar(numero) {\n\tvar strNum=String(numero);\n\tvar strNum2='';\n\tvar i=0;\n\tfor(i=strNum.length-4;i>=0;i-=3) {\n\t\tstrNum2=(strNum[i]=='-'?'':'.')+strNum.substring(i+1, i+4)+strNum2;\n\t}\n\tstrNum2=strNum.substr(0, i+4)+strNum2;\n\treturn strNum2;\n}\n\n\nfunction calculate(){\n\tvar capacity=0;\n\tvar speed=0;\n\tvar consumption=0;\n\t\t\n\tfor(i=202; i<215; i++){\n\t\tx=document.getElementsByName(\"ship\"+i);\n\t\ty=document.getElementsByName(\"capacity\"+i);\n\t\tu=document.getElementsByName(\"speed\"+i);\n\t\tv=document.getElementsByName(\"consumption\"+i);\n\t\tif(x.length && y.length && x[0].value!=''){\n\t\t\tshipCount=parseInt(x[0].value, 10);\n\t\t\tshipCapacity=parseInt(y[0].value, 10);\n\t\t\tshipSpeed=parseInt(u[0].value, 10);\n\t\t\tshipConsumption=parseInt(v[0].value, 10);\n\t\t\tcapacity+=shipCount*shipCapacity;\n\t\t\tif((speed > shipSpeed || speed == 0) && shipCount>0 ) speed=shipSpeed;\n\t\t\t\tconsumption +=shipCount*shipConsumption;\n\t\t}\n\t}\t\n\tif(recursos>capacity){\n\t\tsurstr = puntuar(recursos-capacity);\n\t\tvar cp = 0;\n\t\tvar cg = 0;\n\t\ttry {cp = document.getElementsByName('maxship202')[0].value}\n\t\t\tcatch (e) {}\n\t\ttry {cg = document.getElementsByName('maxship203')[0].value}\n\t\t\tcatch (e) {}\n\t\tsurstr += '&nbsp;&nbsp;<font color=\"orangered\" title=\"Cargueros pequenyos\"> CP: ' +\n\t\t\t\t\t\tpuntuar(Math.ceil((recursos-capacity)\/5000)) +\n\t\t\t\t\t\t(capacity==0?' (' + cp + ')':'') + '<\/font>' +\n\t\t\t\t\t\t'&nbsp;&nbsp;<font color=\"orange\" title=\"Cargueros grandes\"> CG: ' +\n\t\t\t\t\t\tpuntuar(Math.ceil((recursos-capacity)\/25000)) +\n\t\t\t\t\t\t(capacity==0?' (' + cg + ')':'') + '<\/font>';\n\t}else {\n\t\tsurstr='0';\n\t}\n\tvar s=document.getElementsByTagName('th');\n\tvar k=s.length-1;\n\ts[k].innerHTML='<font color=\"#9999FF\">Recursos restantes: ' + surstr + '<\/font>' +\n\t\t\t\t\t\t(capacity>0?'&nbsp;&nbsp;<font color=\"#00FF66\">Capacidad: '\t+ puntuar(capacity) + '<\/font>' +\n\t\t\t\t\t\t'<br \/><font color=\"lightblue\">Velocidad max: ' + puntuar(speed) + '<\/font>' +\n\t\t\t\t\t\t'&nbsp;&nbsp;<font color=\"#77bb22\">Consumo: ' + puntuar(consumption) + '<\/font>':'');\t\t\n}\n})();\n","title":"Ogame","json-url":"http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/api\/script\/3592","coscript-url":"coscript:http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/lite\/script\/3592","private":false,"body-html":"<!-- (C) Copyright IBM Corp. 2010 -->\n<p>\/\/ UserScript<br \/>\n\/\/ @name           Ogame menu flota para la Version 0.77<br \/>\n\/\/ @author         sylkat &#8211; Modificado por MxBajista<br \/>\n\/\/ @date           2007-09-05<br \/>\n\/\/ @version        0.11<br \/>\n\/\/ @namespace     <br \/>\n\/\/ @description    Script original modificado para la compatibilizar  con la version 0.77 de Ogame.<br \/>\n\/\/ @include        http:\/\/uni39.ogame.com.es\/game\/index.php?page=flotten1&amp;* <br \/>\n\/\/ \/UserScript<\/p>\n<p>(function()<br \/>\n{<br \/>\n\tvar inputs = document.evaluate(&#8220;\/\/input[<code>type='text' or not(<\/code>type)]&#8221;, document, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);<br \/>\n\t\tfor (var i=0; i&lt;inputs.snapshotLength; i++) {<br \/>\n\t\t\tvar a = document.createElement(&#8220;a&#8221;);<br \/>\n\t\t\ta.setAttribute(&#8220;href&#8221;, &#8220;javascript:var texto=document.getElementsByName(&#8217;&#8221;<ins>inputs.snapshotItem(i).name<\/ins>&#8220;&#8217;)<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>;texto.value=999999;texto.onchange();&#8221;);<br \/>\n\t\t\ta.innerHTML = &#8220;&infin;&#8221;;<br \/>\n\t\t\tinputs.snapshotItem(i).parentNode.appendChild(a);<\/p>\n<p>var a = document.createElement(&#8220;a&#8221;);<br \/>\n\t\t\ta.setAttribute(&#8220;href&#8221;, &#8220;javascript:var texto=document.getElementsByName(&#8217;&#8221;<ins>inputs.snapshotItem(i).name<\/ins>&#8220;&#8217;)<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>;texto.value++;texto.onchange();&#8221;);<br \/>\n\t\t\ta.innerHTML=&#8216;+&#8217;;<br \/>\n\t\t\tinputs.snapshotItem(i).parentNode.appendChild(a);<\/p>\n<p>var a = document.createElement(&#8220;a&#8221;);<br \/>\n\t\t\ta.setAttribute(&#8220;href&#8221;, &#8220;javascript:var texto=document.getElementsByName(&#8217;&#8221;<ins>inputs.snapshotItem(i).name<\/ins>&#8220;&#8217;)<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>;if (texto.value&gt;0){ texto.value&#8212;;texto.onchange();}&#8221;);<br \/>\n\t\t\ta.innerHTML = &#8220;&minus;&#8221;;<br \/>\n\t\t\tinputs.snapshotItem(i).parentNode.appendChild(a);<\/p>\n<p>var a = document.createElement(&#8220;a&#8221;);<br \/>\n\t\t\ta.setAttribute(&#8220;href&#8221;, &#8220;javascript:var texto=document.getElementsByName(&#8217;&#8221;<ins>inputs.snapshotItem(i).name<\/ins>&#8220;&#8217;)<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>;texto.value=0;texto.onchange();&#8221;);<br \/>\n\t\t\ta.innerHTML = &#8220;&bull;&#8221;;<br \/>\n\t\t\tinputs.snapshotItem(i).parentNode.appendChild(a);<br \/>\n\t\t}<\/p>\n<p>var element = document.evaluate(&#8216;\/html\/body\/div\/center\/table\/tbody\/tr\/td<sup class=\"footnote\"><a href=\"#fn2\">2<\/a><\/sup>\/table\/tbody\/tr<sup class=\"footnote\"><a href=\"#fn3\">3<\/a><\/sup>&#8217;, document, null, \tXPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.getElementsByTagName(&#8216;td&#8217;);<br \/>\n\tvar metal = parseInt(element<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.innerHTML.replace(\/.<strong>&gt;(.<\/strong>)&lt;.<strong>\/g,&#8216;$1&#8217;).replace(\/\\.\/g, &#8217;&#8217;));<br \/>\n\tvar cristal = parseInt(element<sup class=\"footnote\"><a href=\"#fn1\">1<\/a><\/sup>.innerHTML.replace(\/.<\/strong>&gt;(.<strong>)&lt;.<\/strong>\/g,&#8216;$1&#8217;).replace(\/\\.\/g, &#8216;&#8217;));<br \/>\n\tvar deuterio = parseInt(element<sup class=\"footnote\"><a href=\"#fn2\">2<\/a><\/sup>.innerHTML.replace(\/.<strong>&gt;(.<\/strong>)&lt;.*\/g,&#8217;$1&#8217;).replace(\/\\.\/g, &#8216;&#8217;));<br \/>\n\tvar recursos = metal + cristal + deuterio;<br \/>\n\tunsafeWindow.calculate = calculate;<br \/>\n\tvar infoRow = document.getElementsByTagName(&#8217;tr&#8217;);<br \/>\n\tvar as = infoRow[infoRow.length-3].getElementsByTagName(&#8216;a&#8217;);<br \/>\n\tfor (var i=0; i&lt;as.length; i++)<br \/>\n\t\tas[i].setAttribute(&#8216;onclick&#8217;, &#8216;setTimeout(calculate, 20)&#8217;);<br \/>\n\tinfoRow = infoRow[infoRow.length-1].firstChild;<br \/>\n\tcalculate();<br \/>\n\tfor(i=202; i&lt;215; i++){  \/\/ quiza se podria reducir los bucles de busqueda cogiendo directamente esa columna<br \/>\n\t\tx=document.getElementsByName(&quot;ship&quot;+i);<br \/>\n\t\tif(x.length){<br \/>\n\t\t\tx<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.addEventListener(&#8216;keyup&#8217;,calculate,true);<br \/>\n\t\t\tx<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.parentNode.previousSibling.previousSibling.firstChild.setAttribute(&#8216;onclick&#8217;, &#8216;setTimeout(calculate, 20)&#8217;);<br \/>\n\t\t\tx<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.setAttribute(&#8216;onchange&#8217;, &#8220;this.value=parseInt(Math.min(parseInt(&#8217;0&#8217;+this.value, 10), parseInt(getElementsByName(&#8217;max&#8217;+this.name)<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.value, 10)),10);setTimeout(calculate, 10)&#8221;);<br \/>\n\t}<br \/>\n}<\/p>\n<p>function puntuar(numero) {<br \/>\n\tvar strNum=String(numero);<br \/>\n\tvar strNum2=&#8216;&#8217;;<br \/>\n\tvar i=0;<br \/>\n\tfor(i=strNum.length-4;i&gt;=0;i-=3) {<br \/>\n\t\tstrNum2=(strNum[i]==&#8217;-&#8216;?&#8217;&#8216;:&#8217;.&#8217;)<ins>strNum.substring(i<\/ins>1, i+4)<ins>strNum2;<br \/>\n\t}<br \/>\n\tstrNum2=strNum.substr(0, i<\/ins>4)+strNum2;<br \/>\n\treturn strNum2;<br \/>\n}<\/p>\n<p>function calculate(){<br \/>\n\tvar capacity=0;<br \/>\n\tvar speed=0;<br \/>\n\tvar consumption=0;<\/p>\n<p>for(i=202; i&lt;215; i++){<br \/>\n\t\tx=document.getElementsByName(&quot;ship&quot;+i);<br \/>\n\t\ty=document.getElementsByName(&quot;capacity&quot;+i);<br \/>\n\t\tu=document.getElementsByName(&quot;speed&quot;+i);<br \/>\n\t\tv=document.getElementsByName(&quot;consumption&quot;+i);<br \/>\n\t\tif(x.length &amp;&amp; y.length &amp;&amp; x<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.value!=&#8216;&#8217;){<br \/>\n\t\t\tshipCount=parseInt(x<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.value, 10);<br \/>\n\t\t\tshipCapacity=parseInt(y<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.value, 10);<br \/>\n\t\t\tshipSpeed=parseInt(u<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.value, 10);<br \/>\n\t\t\tshipConsumption=parseInt(v<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.value, 10);<br \/>\n\t\t\tcapacity+=shipCount*shipCapacity;<br \/>\n\t\t\tif((speed &gt; shipSpeed || speed == 0) &amp;&amp; shipCount&gt;0 ) speed=shipSpeed;<br \/>\n\t\t\t\tconsumption +=shipCount*shipConsumption;<br \/>\n\t\t}<br \/>\n\t}\t<br \/>\n\tif(recursos&gt;capacity){<br \/>\n\t\tsurstr = puntuar(recursos-capacity);<br \/>\n\t\tvar cp = 0;<br \/>\n\t\tvar cg = 0;<br \/>\n\t\ttry {cp = document.getElementsByName(&#8217;maxship202&#8217;)<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.value}<br \/>\n\t\t\tcatch (e) {}<br \/>\n\t\ttry {cg = document.getElementsByName(&#8216;maxship203&#8217;)<sup class=\"footnote\"><a href=\"#fn0\">0<\/a><\/sup>.value}<br \/>\n\t\t\tcatch (e) {}<br \/>\n\t\tsurstr += &#8216;&nbsp;&nbsp;<font color=\"orangered\" title=\"Cargueros pequenyos\"> CP: &#8217; +<br \/>\n\t\t\t\t\t\tpuntuar(Math.ceil((recursos-capacity)\/5000)) +<br \/>\n\t\t\t\t\t\t(capacity==0?&#8217; (&#8217; + cp + &#8216;)&#8217;:&#8216;&#8217;) + &#8217;<\/font>&#8217; +<br \/>\n\t\t\t\t\t\t&#8216;&nbsp;&nbsp;<font color=\"orange\" title=\"Cargueros grandes\"> CG: &#8217; +<br \/>\n\t\t\t\t\t\tpuntuar(Math.ceil((recursos-capacity)\/25000)) +<br \/>\n\t\t\t\t\t\t(capacity==0?&#8217; (&#8217; + cg + &#8216;)&#8217;:&#8216;&#8217;) + &#8217;<\/font>&#8217;;<br \/>\n\t}else {<br \/>\n\t\tsurstr=&#8216;0&#8217;;<br \/>\n\t}<br \/>\n\tvar s=document.getElementsByTagName(&#8216;th&#8217;);<br \/>\n\tvar k=s.length-1;<br \/>\n\ts[k].innerHTML=&#8216;<font color=\"#9999FF\">Recursos restantes: &#8217; + surstr + &#8217;<\/font>&#8217; +<br \/>\n\t\t\t\t\t\t(capacity&gt;0?&#8216;&nbsp;&nbsp;<font color=\"#00FF66\">Capacidad: &#8217;\t+ puntuar(capacity) + &#8217;<\/font>&#8217; +<br \/>\n\t\t\t\t\t\t&#8216;<br \/><font color=\"lightblue\">Velocidad max: &#8217; + puntuar(speed) + &#8217;<\/font>&#8217; +<br \/>\n\t\t\t\t\t\t&#8216;&nbsp;&nbsp;<font color=\"#77bb22\">Consumo: &#8217; + puntuar(consumption) + &#8217;<\/font>&#8217;:&#8217;&#8217;);\t\t<br \/>\n}<br \/>\n})();<\/p>\n","coscripter-wiki-url":"http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/browse\/script\/3592","id":3592,"koalescence-url":"http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/browse\/script\/3592","coscripter-executed-url":"http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/api\/executed","coscripter-url":"http:\/\/coscripter.researchlabs.ibm.com\/coscripter\/lite\/script\/3592"}